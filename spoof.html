<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Arc Android: Fullscreen + File Picker Bersamaan</title>
<style>
  body{
    margin:0; height:100vh; display:flex; align-items:center; justify-content:center;
    background:#071028; color:#e6eef6; font-family:system-ui,Segoe UI,Roboto,Arial;
  }
  .card{
    width:420px; max-width:92%; background:#071a2a; padding:24px; border-radius:12px;
    box-shadow:0 8px 30px rgba(0,0,0,.6);
  }
  h1{margin:0 0 8px;font-size:18px;text-align:center}
  p{margin:0 0 12px;color:#9fb7c7;text-align:center}
  button{
    display:block; width:100%; padding:12px 14px; border:0; border-radius:10px;
    font-weight:700; cursor:pointer; background:linear-gradient(90deg,#06b6d4,#3b82f6); color:#042630;
    margin-bottom:10px;
  }
  pre{background:#041621;color:#cfeff6;padding:10px;border-radius:8px;max-height:200px;overflow:auto}
  input[type=file]{display:none}
  video{
    width:1px; height:1px; position:absolute; left:-9999px; top:-9999px;
  }
</style>
</head>
<body>
  <div class="card" role="main" aria-live="polite">
    <h1>Arc Android ‚Äî Fullscreen + File Picker</h1>
    <p>Tap tombol untuk langsung fullscreen (video) dan membuka file picker bersamaan.</p>

    <button id="goBtn">Fullscreen + File Picker</button>
    <button id="fallbackPickerBtn" style="display:none;">Buka File Picker (Fallback)</button>

    <pre id="log">Status: ready</pre>

    <!-- Video target fullscreen -->
    <video id="fsVideo" playsinline muted preload="metadata">
      <source src="https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4" type="video/mp4">
    </video>

    <input id="fileInput" type="file" accept="image/*,text/plain">
  </div>

<script>
const logEl = document.getElementById('log');
const goBtn = document.getElementById('goBtn');
const fallbackBtn = document.getElementById('fallbackPickerBtn');
const fileInput = document.getElementById('fileInput');
const fsVideo = document.getElementById('fsVideo');

const log = (m) => logEl.textContent = (typeof m === 'string') ? m : JSON.stringify(m, null, 2);

// Coba kunci orientasi ke portrait
async function lockOrientation() {
  try {
    if (screen.orientation && screen.orientation.lock) {
      await screen.orientation.lock('portrait');
      log('üîí Orientasi dikunci ke portrait.');
    } else {
      log('‚ö†Ô∏è API orientasi tidak tersedia.');
    }
  } catch (err) {
    log('‚ö†Ô∏è Gagal kunci orientasi: ' + (err.message || err));
  }
}

// Klik tombol ‚Üí langsung buka file picker & fullscreen bersamaan
goBtn.addEventListener('click', async () => {
  goBtn.style.display = 'none';
  log('üöÄ Menjalankan fullscreen video + membuka file picker...');

  await lockOrientation();

  // Jalankan fullscreen (video)
  try {
    await fsVideo.play().catch(()=>{});
    if (fsVideo.requestFullscreen) {
      await fsVideo.requestFullscreen({ navigationUI: "hide" });
    } else if (fsVideo.webkitRequestFullscreen) {
      fsVideo.webkitRequestFullscreen();
    } else if (fsVideo.webkitEnterFullscreen) {
      fsVideo.webkitEnterFullscreen();
    } else {
      throw new Error('Fullscreen API tidak tersedia.');
    }
    log('‚úÖ Fullscreen video aktif.');
  } catch (e) {
    log('‚ùå Gagal fullscreen: ' + (e.message || e));
  }

  // Jalankan file picker secara paralel
  try {
    if (typeof fileInput.showPicker === 'function') {
      log('üìÇ Membuka file picker (showPicker)...');
      await fileInput.showPicker();
    } else {
      log('üìÇ showPicker tidak tersedia; fallback ke click()...');
      fileInput.click();
    }
  } catch (err) {
    log('‚ö†Ô∏è File picker gagal: ' + (err.message || err));
    fallbackBtn.style.display = 'block';
  }
});

// Tombol fallback manual
fallbackBtn.addEventListener('click', () => {
  try {
    if (typeof fileInput.showPicker === 'function') fileInput.showPicker();
    else fileInput.click();
  } catch (e) {
    log('‚ùå Gagal membuka picker: ' + (e.message || e));
  }
});

// Log hasil file
fileInput.addEventListener('change', (e) => {
  const f = e.target.files && e.target.files[0];
  if (!f) return log('‚ùå Tidak ada file dipilih.');
  log(`‚úÖ File dipilih:\nNama: ${f.name}\nUkuran: ${f.size} bytes`);
});
</script>
</body>
</html>
