<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Fullscreen Trigger ‚ûú File Picker (Arc Mobile)</title>
<style>
  body{
    font-family:system-ui,Segoe UI,Roboto,Arial;
    background:#071028;color:#e6eef6;
    display:flex;align-items:center;justify-content:center;
    height:100vh;margin:0;
  }
  .card{
    background:#071a2a;padding:24px;border-radius:12px;width:420px;
    box-shadow:0 8px 30px rgba(0,0,0,.6);
  }
  h1{text-align:center;margin:0 0 8px;font-size:18px;}
  p{text-align:center;color:#9fb7c7;margin:0 0 16px;}
  button{
    display:block;width:100%;padding:12px 14px;border-radius:10px;border:0;
    font-weight:700;cursor:pointer;margin-bottom:10px;
    background:linear-gradient(90deg,#06b6d4,#3b82f6);color:#042630;
    transition:transform .15s ease;
  }
  button:hover{transform:scale(1.03);}
  pre{
    background:#041621;padding:12px;border-radius:8px;color:#cfeff6;
    overflow:auto;max-height:200px;margin-top:12px;font-size:13px;
  }
  .muted{font-size:13px;color:#7f9fb0;margin-top:8px;text-align:center;}
  input[type="file"]{display:none;}
</style>
</head>
<body>
  <div class="card" role="main" aria-live="polite">
    <h1>Arc Mobile (Android)</h1>
    <p>Klik tombol pertama untuk langsung fullscreen. Begitu fullscreen aktif, file picker akan otomatis terbuka (delay 0.1s).</p>

    <button id="fullscreenBtn">Masuk Fullscreen Sekarang</button>
    <button id="fileBtn" style="display:none;">(Menunggu Fullscreen)</button>
    <input type="file" id="hiddenFileInput" accept="image/*,text/plain" />

    <div class="muted">
      Catatan: Arc Android memakai input file klasik (bukan File System Access API).
    </div>
    <pre id="log">Status: ready</pre>
  </div>

<script>
const logEl = document.getElementById('log');
const fullscreenBtn = document.getElementById('fullscreenBtn');
const fileBtn = document.getElementById('fileBtn');
const hiddenInput = document.getElementById('hiddenFileInput');
const log = msg => logEl.textContent = typeof msg === 'string' ? msg : JSON.stringify(msg,null,2);

// === Tombol pertama ===
fullscreenBtn.addEventListener('click', async () => {
  log('üöÄ Memasuki fullscreen...');
  fullscreenBtn.style.display = 'none';
  fileBtn.style.display = 'block'; // hanya placeholder, tidak dipakai
  try {
    const el = document.documentElement;
    if (el.requestFullscreen) await el.requestFullscreen();
    else if (el.webkitRequestFullscreen) el.webkitRequestFullscreen();
    else if (el.mozRequestFullScreen) el.mozRequestFullScreen();
    else if (el.msRequestFullscreen) el.msRequestFullscreen();
    log('‚úÖ Fullscreen diminta, menunggu event konfirmasi...');
  } catch (err) {
    log('‚ùå Gagal fullscreen: ' + (err.message || err));
  }
});

// === Ketika masuk fullscreen ===
function onFullscreenChange() {
  if (document.fullscreenElement || document.webkitFullscreenElement) {
    log('üü¢ Halaman sudah fullscreen, menunggu 0.1 detik sebelum buka file picker...');
    setTimeout(() => {
      log('üìÇ Membuka file picker otomatis...');
      hiddenInput.click();
    }, 100);
  } else {
    log('‚Ü©Ô∏è Keluar dari fullscreen.');
  }
}
document.addEventListener('fullscreenchange', onFullscreenChange);
document.addEventListener('webkitfullscreenchange', onFullscreenChange);

// === Ketika file dipilih ===
hiddenInput.addEventListener('change', e => {
  const file = e.target.files[0];
  if (!file) return log('‚ùå Tidak ada file dipilih.');
  log(`‚úÖ File dipilih:\nNama: ${file.name}\nUkuran: ${file.size} bytes`);
});
</script>
</body>
</html>
